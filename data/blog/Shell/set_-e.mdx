---
title: 'set -exu'
tags: [Shell]
date: 2026-01-16
---

`set -exu` is a **shell built-in command** (commonly used in `bash` scripts) that changes how the shell behaves.
Each letter after `-` is an **option**.

Letâ€™s break it down:

---

## `set -e` â€” _Exit on error_

- If **any command returns a non-zero exit status**, the script **stops immediately**.
- Prevents scripts from continuing in a broken state.

**Example**

```sh
cp missing_file.txt /tmp
echo "This will NOT run"
```

If `missing_file.txt` doesnâ€™t exist, the script exits before the `echo`.

ğŸ“Œ Exception: commands in `if`, `while`, `until`, `&&`, `||` are treated specially.

---

## `set -x` â€” _Execution trace (debug mode)_

- Prints **each command and its arguments** to stderr **before execution**.
- Very useful for debugging scripts.

**Example output**

```sh
+ echo Hello
Hello
+ ls /tmp
```

This shows exactly what the shell is executing.

---

## `set -u` â€” _Treat unset variables as errors_

- Using an **unset variable** causes the script to **exit immediately**.
- Helps catch typos and missing environment variables early.

**Example**

```sh
echo "$USERNAME"
```

If `USERNAME` is not set â†’ script exits with an error.

You can safely handle defaults like this:

```sh
echo "${USERNAME:-default_user}"
```

---

## Combined meaning of `set -exu`

When used together, it means:

> **Run in strict, safe, and debuggable mode**

- âŒ Stop on errors (`-e`)
- ğŸ” Show commands as they run (`-x`)
- âš ï¸ Fail on unset variables (`-u`)

This combination is **very common in production-quality shell scripts** and CI/CD pipelines.

---

## Common alternative: `set -Eeuo pipefail`

You may also see:

```sh
set -Eeuo pipefail
```

Adds:

- `-E` â†’ traps work in functions/subshells
- `pipefail` â†’ pipelines fail if **any** command fails

---

### TL;DR

```sh
set -exu
```

means:

> _â€œFail fast, show me everything, and donâ€™t tolerate sloppy variables.â€_

